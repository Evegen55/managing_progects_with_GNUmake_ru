%%%-------------------------------------------------------------------
%%% Rules
%%%-------------------------------------------------------------------
\chapter{Правила}
\label{chap:rules}

В предыдущей главе мы рассмотрели несколько правил для компиляции и
компоновки программы подсчёта слов. Каждое из этих правил определяло
цель~--- файл, который требуется собрать. Каждая цель зависела от
множества реквизитов, которые также являлись файлами. Когда
требовалось обновить цель, \GNUmake{} выполнял сценарий сборки только
в том случае, если файлы реквизитов имели дату модификации более
позднюю, чем цель. Поскольку цель одного правила может быть реквизитом
другого, множество целей и реквизитов может быть представлено в форме
\index{Граф зависимостей}
\newword{графа зависимостей} (\newword{dependency graph}). Составление
и обработка графа зависимостей является основной работой \GNUmake{}.

\index{Правила!явные}
Поскольку правила так важны для \GNUmake{}, существует несколько их
разновидностей. \newword{Явные правила}, наподобие тех, что были
использованы в предыдущей главе, указывают на необходимость обновления
цели при модификации или отсутствии файлов-реквизитов. Правила этого
типа вы будете писать наиболее часто.
\index{Правила!шаблонные}
\newword{Шаблонные правила} используют подстановки (wildcards) вместо
явного указания имён файлов.  Это позволяет \GNUmake{} применять такие
правила каждый раз при соответствии имени цели некоторому шаблону.
\index{Правила!неявные}
\newword{Неявные правила}~--- это явные или суффиксные правила,
встроенные в базу данных правил \GNUmake{}. Наличие встроенной базы
данных правил упрощает написание \Makefile'ов, поскольку для многих
общих задач уже известны типы файлов, суффиксы и сценарии сборки
целей.
\index{Правила!шаблонные!статические}
\newword{Статические шаблонные правила} отличаются от обычных
шаблонных правил тем, что могут быть применены только к определённому
списку целей.

GNU \GNUmake{} может быть использован как замена для многих других
версий \GNUmake{}. Он включает в себя множество возможностей,
сохранённых для поддержания обратной совместимости. Например,
\index{Правила!суффиксные}
\newword{Суффиксные правила} были реализованы в одной из первых версий
\GNUmake{} для написания общих правил. \GNUmake{} имеет поддержку
сиффиксных правил, однако они признаны устаревшими, поскольку могут
быть заменены более простыми и более \'{о}бщными шаблонными правилами.

\input{./part1/rules/explicit_rules.tex}
\input{./part1/rules/variables.tex}
\input{./part1/rules/vpath.tex}
\input{./part1/rules/pattern_rules.tex}
\input{./part1/rules/implicit_rule_db.tex}
\input{./part1/rules/special_targets.tex}
\input{./part1/rules/auto_dep_gen.tex}
\input{./part1/rules/managing_libs.tex}
